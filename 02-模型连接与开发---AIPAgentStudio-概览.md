# AIP Agent Studio 概览

> 更新时间：2025-12-28
> 文档来源：https://palantir.com/docs/foundry/agent-studio/overview/

## 概述

**AIP Agent Studio** 允许用户构建**交互式助手**，称为 **AIP Agents**，这些助手配备了企业特定的信息和工具，可以在平台内部以及通过 Ontology SDK 和平台 API 外部部署。

## 核心价值

### 主要功能

- **企业特定信息**：配备企业特定信息
- **自定义工具**：使用自定义工具
- **平台集成**：在平台内部和外部部署
- **自动化工作流**：自动化复杂任务

### 技术基础

AIP Agents 由以下组件驱动：
- **大型语言模型 (LLMs)**
- **Ontology**
- **文档**
- **自定义工具**

## AIP Agents

### 定义

**AIP Agents** 是交互式助手，可以：
- 集成到应用程序中
- 促进动态、上下文感知的读写工作流
- 自动化任务
- 减少手动应用交互

### 示例用例

#### 视频转录分析

一个 AIP Agent 使用应用程序变量将视频转录的过滤对象集作为上下文，来回答用户关于美联储最近新闻发布会的问题。

```
┌─────────────────────────────────────────────────────────────┐
│           AIP Agent 示例：视频分析                          │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  输入: 过滤的视频转录对象集                                 │
│     ↓                                                        │
│  AIP Agent 处理                                            │
│     ├── 使用 LLM 理解内容                                  │
│     ├── 查询 Ontology 获取上下文                           │
│     └── 分析视频内容                                       │
│     ↓                                                        │
│  输出: 关于新闻发布会的问答                                 │
│                                                             │
│  部署: Workshop 应用程序                                    │
│  └── 用户可以与选定的视频交互                              │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## 安全模型

### 平台安全控制

AIP Agent Studio 建立在与管理 Palantir 平台其余部分相同的严格安全模型之上：

- **最小权限原则**：平台安全控制仅授予 LLM 完成任务所需的访问权限
- **权限继承**：继承用户的权限
- **数据保护**：保护企业数据
- **审计日志**：完整的审计跟踪

## Agent 层级框架

AIP Agent Studio 使用 **Agent 层级框架**，每一层增加复杂性和自动化：

```
┌─────────────────────────────────────────────────────────────┐
│              AIP Agent 层级框架                             │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  Tier 4: Automated Agent（自动化代理）                     │
│  ├── 自动化和委派任务                                      │
│  └── 自主处理复杂工作流                                    │
│     ↑                                                        │
│  Tier 3: Agentic Application（代理应用程序）                │
│  ├── 集成到 Workshop/OSDK 应用                             │
│  ├── 配置变量读写应用状态                                  │
│  └── 动态上下文交互                                        │
│     ↑                                                        │
│  Tier 2: Task-specific Agent（特定任务代理）                │
│  ├── 可重用配置                                            │
│  ├── 细粒度权限                                            │
│  ├── Ontology 上下文                                       │
│  └── 文档/函数上下文                                       │
│     ↑                                                        │
│  Tier 1: Ad-hoc Analysis（临时分析）                        │
│  └── AIP Threads 文档分析                                 │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### Tier 1: Ad-hoc Analysis（临时分析）

**适用对象**：AIP 或 LLMs 新手

**特点**：
- 从 AIP Threads 开始
- 了解 LLMs 如何提高生产力
- 拖放文档进行临时文档分析
- 获取相关的 LLM 驱动答案

**工具**：**AIP Threads**

### Tier 2: Task-specific Agent（特定任务代理）

**特点**：
- **可重用性**：将临时线程配置升级为 AIP Agents
- **权限控制**：细粒度权限和配置选项
- **上下文类型**：
  - Ontology 上下文
  - 文档上下文
  - 自定义函数支持上下文
- **针对性交互**：更有针对性和特定的交互

**部署方式**：
- 从 AIP Agent Studio 构建和部署
- 在 AIP Threads 中使用
- 在带有平台 API 的 OSDK 应用中使用

### Tier 3: Agentic Application（代理应用程序）

**特点**：
- **Workshop 集成**：使用 AIP Agent 小部件集成到 Workshop
- **OSDK 应用**：使用 Developer Console 和平台 API 集成到第三方 OSDK 应用
- **变量配置**：配置代理变量以读取和更新应用程序状态
- **动态交互**：促进动态、上下文感知的工作流

### Tier 4: Automated Agent（自动化代理）

**特点**：
- **自动化任务**：自动化和委派任务给代理
- **自主处理**：使代理能够自主处理复杂工作流
- **函数发布**：将代理发布为函数
- **AIP Automate 集成**：拉入 AIP Automate

## AIP Agent 组成

### 核心组件

```
┌─────────────────────────────────────────────────────────────┐
│              AIP Agent 核心组件                             │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  AIP Agent                                                  │
│  ├── LLM（大语言模型）                                     │
│  ├── Context（上下文）                                     │
│  │   ├── Ontology 对象                                     │
│  │   ├── 文档                                              │
│  │   └── 自定义函数                                        │
│  ├── Tools（工具）                                         │
│  │   ├── Foundry Functions                                │
│  │   ├── AIP Logic Functions                              │
│  │   └── 自定义工具                                        │
│  └── Variables（变量）                                     │
│      ├── 应用变量                                          │
│      └── 配置参数                                          │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 上下文类型

| 上下文类型 | 说明 |
|-----------|------|
| **Ontology** | 访问和查询 Ontology 对象 |
| **文档** | 使用企业文档作为上下文 |
| **函数** | 调用 Foundry Functions 和 AIP Logic Functions |
| **应用变量** | 读写应用程序状态 |

## 开发工作流程

### 构建步骤

```
┌─────────────────────────────────────────────────────────────┐
│          AIP Agent 开发工作流程                             │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  1. 定义目标                                                │
│     ├── 确定自动化任务                                     │
│     ├── 识别所需上下文                                     │
│     └── 选择工具和函数                                     │
│     ↓                                                        │
│  2. 创建 Agent                                              │
│     ├── 在 AIP Agent Studio 中创建                         │
│     ├── 配置上下文源                                       │
│     ├── 添加工具和函数                                     │
│     └── 设置变量                                           │
│     ↓                                                        │
│  3. 测试和调试                                              │
│     ├── 使用测试数据测试                                   │
│     ├── 验证响应质量                                       │
│     └── 优化提示词和配置                                   │
│     ↓                                                        │
│  4. 部署 Agent                                              │
│     ├── 集成到 Workshop                                    │
│     ├── 发布为 Function                                     │
│     └── 配置自动化                                         │
│     ↓                                                        │
│  5. 监控和优化                                              │
│     ├── 监控性能                                           │
│     ├── 收集反馈                                           │
│     └── 迭代改进                                           │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## 集成能力

### Workshop 集成

- **AIP Agent Widget**：使用 AIP Agent 小部件
- **变量绑定**：绑定到 Workshop 变量
- **事件触发**：响应 Workshop 事件
- **状态同步**：与应用状态同步

### OSDK 集成

- **外部应用**：通过 OSDK 集成到外部应用
- **平台 API**：使用平台 API
- **Developer Console**：通过 Developer Console 配置

### Functions 集成

- **发布为 Function**：将 Agent 发布为 Function
- **AIP Automate**：在 AIP Automate 中使用
- **自动执行**：自动化执行任务

## 工具和功能

### 可用工具

| 工具类型 | 功能 |
|---------|------|
| **Foundry Functions** | 调用任何 Foundry 函数 |
| **AIP Logic Functions** | 使用发布的 AIP Logic 函数 |
| **Ontology Query** | 查询 Ontology 对象 |
| **Document Search** | 搜索企业文档 |
| **Custom Tools** | 自定义工具 |

### 配置选项

- **权限**：细粒度权限控制
- **变量**：配置输入输出变量
- **上下文**：选择上下文源
- **工具**：添加和配置工具

## 使用场景

### 1. 文档分析

- **视频转录分析**：分析视频转录内容
- **文档问答**：基于文档回答问题
- **内容总结**：总结文档内容

### 2. 数据交互

- **Ontology 查询**：查询和检索对象
- **数据写入**：通过 Actions 写入数据
- **报表生成**：生成定制报表

### 3. 任务自动化

- **工作流自动化**：自动化复杂工作流
- **决策支持**：提供决策建议
- **异常处理**：处理异常情况

### 4. 客户服务

- **问答系统**：回答用户问题
- **问题诊断**：诊断问题
- **解决方案推荐**：推荐解决方案

## 最佳实践

### 1. 从简单开始

- **Tier 1 开始**：从 AIP Threads 开始
- **逐步升级**：逐步升级到更复杂的 Agents
- **迭代改进**：持续迭代改进

### 2. 上下文设计

- **相关上下文**：仅提供相关上下文
- **上下文优化**：优化上下文窗口使用
- **多源上下文**：结合多种上下文源

### 3. 工具选择

- **必要工具**：仅添加必要工具
- **函数版本**：使用最新函数版本
- **自定义工具**：创建自定义工具

### 4. 安全考虑

- **权限控制**：配置适当的权限
- **数据保护**：保护敏感数据
- **审计日志**：维护审计日志

## 与其他功能集成

### AIP Logic

- **函数调用**：调用 AIP Logic Functions
- **逻辑复用**：复用 AIP Logic
- **版本控制**：使用最新版本

### AIP Assist

- **AIP Agents**：在 AIP Assist 中使用 AIP Agents
- **自定义助手**：创建企业特定助手
- **知识库**：使用企业知识库

### Functions

- **发布为 Function**：将 Agent 发布为 Function
- **平台范围使用**：在平台任何地方使用
- **自动化**：通过 Automate 自动化

## 限制

### 当前限制

- **LLM 依赖**：依赖 LLM 可用性和性能
- **上下文窗口**：受上下文窗口限制
- **工具访问**：需要适当的工具权限

## 相关文档

- [Getting started](https://palantir.com/docs/foundry/agent-studio/getting-started/) - 入门指南
- [Core concepts](https://palantir.com/docs/foundry/agent-studio/core-concepts/) - 核心概念
- [Tools](https://palantir.com/docs/foundry/agent-studio/tools/) - 工具详解
- [Agents as Functions](https://palantir.com/docs/foundry/agent-studio/agents-as-functions/) - Agents 作为函数
- [Foundry APIs](https://palantir.com/docs/foundry/agent-studio/foundry-apis/) - Foundry APIs

---

*本文档基于 Palantir Foundry 官方文档整理*
