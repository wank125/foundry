# Cross-Application Interactivity 概览

> 更新时间：2025-12-28
> 文档来源：https://palantir.com/docs/foundry/cross-app-interactivity/overview/

## 概述

**Cross-Application Interactivity（跨应用交互）** 是在 Palantir 平台上的不同应用程序之间共享数据的能力。平台中的数据可以通过特定的交互点共享，例如通过拖放操作，或者通过配对应用程序以实时共享状态。

## 核心价值

### 主要功能

- **数据共享**：在不同应用程序之间共享数据
- **拖放操作**：通过拖放操作共享数据
- **应用配对**：配对应用程序以实时共享状态
- **生态系统**：创建无缝跨应用程序工作流的生态系统

### 应用场景

```
┌─────────────────────────────────────────────────────────────┐
│          跨应用交互生态系统                                 │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  Gaia (Gotham) ──────┐                                    │
│                      │                                    │
│                      ├─────► Workshop (Foundry)            │
│                      │                                    │
│  Graph (Gotham) ─────┘                                    │
│                                                             │
│  用户可以：                                                │
│  ├── 从 Gaia 拖放数据到 Workshop                          │
│  ├── 配对应用以实时共享状态                               │
│  ├── 跨应用执行工作流                                     │
│  └── 使用命令在应用间传递数据                             │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## 核心概念

### 交互点 (Interaction Points)

应用程序通过特定的交互点共享数据：

| 交互类型 | 说明 |
|---------|------|
| **拖放** | 通过拖放操作在应用间移动数据 |
| **应用配对** | 配对应用以实时共享状态 |
| **命令** | 使用命令在应用间传递数据 |

### 生态系统

实现跨应用交互的应用程序创建了一个生态系统：
- 用户可以无缝构建跨多个应用程序的工作流
- 工作流可以跨越 Gotham 和 Foundry
- 每个交互点都创建与其他应用程序的潜在连接

## 主要功能

### 1. 拖放 (Drag and Drop)

**功能**：
- 从 Gaia 拖放数据到 Workshop 应用
- 通过数据丰富确保数据兼容性
- 在应用之间移动对象或对象集

**示例**：
- 将地图工件从一个应用拖到另一个应用
- 拖动对象以执行工作流
- 实体识别和分流场景

### 2. 应用配对 (App Pairing)

**功能**：
- 连接支持的 Palantir 平台应用程序
- 配对 Gotham 的 Gaia 和 Graph 到 Workshop 模块
- 命令自动定位配对的平台应用程序

**小部件**：
- **App Pairing Widget**：配置应用配对
- **Commands Widget**：在应用间传递命令

### 3. 命令 (Commands)

**功能**：
- 在应用之间传递数据
- 执行跨应用工作流
- 同步选择状态

## 常见交互

### 1. 在应用之间转换工作流和数据

**场景**：当用户完成任务时，下一步通常是将其工作流转换到另一个应用程序以继续执行。

**实现**：
- 使用 Button Group 或 App Pairing 小部件中的命令
- 在应用之间传递数据

### 2. 同步选择状态

**场景**：使用多个应用程序同时完成任务。

**实现**：
- 配置 App Pairing 小部件
- 或设置命令以同步选择状态
- 查看相同数据的互补视图
- 在应用程序之间转换而不会丢失状态

**性能考虑**：
- 仅嵌入需要的应用程序
- 嵌入多个应用可能会影响性能

### 3. 为 AIP 提供上下文

**功能**：
- App Pairing 和 Commands 小部件可以从当前视口或选择读取应用程序状态
- 将该上下文提供给 AIP Logic

**AIP Agents**：
- 在 AIP Agent Studio 中配置代理
- 利用命令作为工具
- 从任何可以与命令互操作的应用程序读取和写入
- 例如 Gaia

### 4. 连接到更广泛的生态系统

**功能**：
- 创建拖放集成点
- 利用本体的力量
- 连接到其他具有类似集成的应用程序

## 支持的应用

### Gotham 应用

- **Gaia**：地图可视化
- **Graph**：图形可视化
- 其他 Gotham 应用程序

### Foundry 应用

- **Workshop**：应用构建
- **Slate**：应用开发
- **Quiver**：时间序列分析
- **Contour**：数据分析
- 其他 Foundry 应用

### 自定义应用

- 使用 Workshop 构建的应用
- 使用 Slate 构建的应用
- 使用 OSDK 构建的应用

## 实现方式

### Workshop 和 Slate

在 Workshop 和 Slate 中构建的应用可以实现跨应用交互：
- **拖放集成点**：创建拖放集成点
- **App Pairing Widget**：使用 App Pairing 小部件
- **Commands**：使用命令

### OSDK

使用 OSDK 构建的应用也可以实现跨应用交互：
- **拖放支持**：实现拖放支持
- **命令处理**：处理命令
- **状态同步**：同步状态

## 开发者扩展

### 第三方开发者

跨应用交互也是第三方开发者的插件点：
- 通过在应用程序之间共享上下文来扩展现有功能
- 随着工作流程的变化和业务逻辑的演变
- 解锁使用 Palantir 平台生成价值的新颖和多样化的方式

## 工作流程示例

### 示例 1：地图到分析

```
┌─────────────────────────────────────────────────────────────┐
│          地图到分析工作流                                  │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  1. Gaia（地图）                                           │
│     ├── 用户选择地理位置                                   │
│     └── 拖放到 Workshop                                    │
│     ↓                                                        │
│  2. Workshop（分析）                                        │
│     ├── 接收地理位置                                       │
│     ├── 显示相关数据                                       │
│     └── 执行分析                                           │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 示例 2：图形到表格

```
┌─────────────────────────────────────────────────────────────┐
│          图形到表格工作流                                  │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  1. Graph（图形）                                          │
│     ├── 用户选择节点                                       │
│     └── 拖放到 Quiver                                       │
│     ↓                                                        │
│  2. Quiver（分析）                                          │
│     ├── 接收节点对象                                       │
│     ├── 显示相关时间序列                                   │
│     └── 执行分析                                           │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

### 示例 3：AIP 代理跨应用操作

```
┌─────────────────────────────────────────────────────────────┐
│        AIP Agent 跨应用操作工作流                           │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  1. AIP Agent                                               │
│     ├── 读取应用状态                                       │
│     ├── 分析数据                                           │
│     └── 生成操作建议                                       │
│     ↓                                                        │
│  2. 命令执行                                                │
│     ├── 在 Gaia 中高亮显示位置                             │
│     ├── 在 Workshop 中更新数据                             │
│     └── 同步状态                                           │
│     ↓                                                        │
│  3. 状态同步                                                │
│     ├── 应用间状态同步                                     │
│     └── 实时更新                                           │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## 配置

### App Pairing Widget

**配置选项**：
- **选择应用**：选择要配对的应用程序
- **同步状态**：配置要同步的状态
- **命令映射**：映射命令

### Commands

**配置选项**：
- **命令定义**：定义命令
- **数据传递**：配置传递的数据
- **执行逻辑**：配置执行逻辑

### Drag and Drop

**配置选项**：
- **数据类型**：支持的数据类型
- **验证规则**：验证规则
- **丰富策略**：数据丰富策略

## 最佳实践

### 1. 设计考虑

- **用户流程**：设计跨应用用户流程
- **数据兼容性**：确保数据兼容性
- **性能优化**：优化性能

### 2. 状态管理

- **最小化状态**：仅同步必要的状态
- **冲突处理**：处理状态冲突
- **错误恢复**：实现错误恢复

### 3. 用户体验

- **视觉反馈**：提供清晰的视觉反馈
- **加载状态**：显示加载状态
- **错误消息**：提供有用的错误消息

## 限制

### 当前限制

- **应用支持**：并非所有应用都支持所有交互类型
- **性能影响**：嵌入多个应用可能影响性能
- **数据类型**：某些数据类型可能不支持拖放

## 相关文档

- [Drag and drop overview](https://palantir.com/docs/foundry/cross-app-interactivity/drag-and-drop-overview/) - 拖放概述
- [App Pairing](https://palantir.com/docs/foundry/workshop/app-pairing/) - 应用配对
- [Commands](https://palantir.com/docs/foundry/workshop/commands/) - 命令
- [Design guidelines](https://palantir.com/docs/foundry/cross-app-interactivity/design-guidelines/) - 设计指南
- [Media types reference](https://palantir.com/docs/foundry/cross-app-interactivity/object-sets/) - 媒体类型参考

---

*本文档基于 Palantir Foundry 官方文档整理*
