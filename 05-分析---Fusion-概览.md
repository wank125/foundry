# Fusion 概览

> 更新时间：2025-12-28
> 文档来源：https://palantir.com/docs/foundry/fusion/overview/

## 概述

**Fusion** 是 Foundry 的**电子表格应用程序**。Fusion 允许用户创建可以执行以下操作的电子表格：

- 通过搜索和数据查找查询 Foundry 数据集
- 利用单元格引用和电子表格函数
- 使用下拉菜单和链接单元格构建交互式电子表格
- 提交结果并将数据集写回 Foundry 供下游使用

## 核心功能

### 1. 数据查询

- **搜索查询**：通过搜索查询 Foundry 数据集
- **数据查找**：使用 VLOOKUP 类似的公式查找数据
- **实时数据**：实时连接到 Foundry 数据
- **索引数据集**：索引数据集以支持快速查找

### 2. 电子表格功能

- **公式支持**：支持丰富的公式库
- **单元格引用**：标准单元格引用
- **下拉菜单**：创建下拉菜单
- **链接单元格**：链接单元格以创建交互式电子表格

### 3. 数据写回

- **提交结果**：提交电子表格结果
- **写回数据集**：将数据写回 Foundry 数据集
- **下游使用**：供下游管道使用

## 与 Actions 的关系

> 如果您要向 Ontology 添加数据，建议使用 **Actions**。

Actions 提供更强大的：
- **权限控制**：更细粒度的权限控制
- **数据验证**：自动数据验证
- **操作审计**：完整的操作审计
- **用户体验**：更好的用户体验

## 主要功能

### 1. Sheets（工作表）

#### 查找和使用数据

- **搜索面板**：通过搜索面板轻松获取数据和对象
- **数据查找**：类似于 VLOOKUP 的数据查找公式
- **实时更新**：数据实时更新

#### 表格区域

- **创建表格区域**：创建和使用表格区域
- **区域格式化**：格式化表格区域
- **区域操作**：对区域执行操作

#### 模板

- **创建模板**：创建可重用模板
- **模板参数**：定义模板参数
- **模板应用**：应用模板生成新表格

#### 格式化

- **单元格格式化**：格式化单元格
- **条件格式化**：基于条件的格式化
- **样式应用**：应用自定义样式

#### 交互功能

- **下拉菜单**：创建下拉菜单
- **锁定单元格**：锁定特定单元格
- **链接**：添加链接

#### 数据更新

- **自动更新**：数据自动更新
- **编辑历史**：查看编辑历史
- **版本控制**：跟踪数据版本

#### 演示视图

- **演示模式**：演示电子表格
- **幻灯片模式**：幻灯片式演示
- **过滤视图**：过滤显示内容

### 2. Formulas（公式）

#### 公式类型

- **查找公式**：查找数据
- **聚合公式**：聚合数据
- **文本公式**：处理文本
- **日期公式**：处理日期
- **布尔公式**：布尔逻辑
- **数组公式**：处理数组

#### 时间序列

- **可视化时间序列**：在电子表格中可视化时间序列数据
- **时间序列公式**：处理时间序列数据
- **聚合操作**：时间序列聚合

#### 验证

- **结果验证**：验证公式结果
- **错误检查**：检查公式错误
- **数据质量**：确保数据质量

#### Actions

- **执行 Actions**：从电子表格执行 Actions
- **参数传递**：传递参数到 Actions
- **结果返回**：接收 Action 结果

#### 函数库

- **内置函数**：丰富的内置函数库
- **自定义函数**：创建自定义函数
- **函数组合**：组合多个函数

### 3. Datasets（数据集）

#### 同步到数据集

- **同步表格**：将表格同步到数据集
- **重新同步**：重新同步表格到数据集
- **增量更新**：增量更新数据集

#### 导入文档

- **导入 XLS**：导入 Excel 文档
- **导入 CSV**：导入 CSV 文件
- **格式检测**：自动检测格式

#### 索引数据集

- **索引新数据集**：索引新数据集以支持查找
- **更新索引**：更新现有索引
- **Lime 集成**：集成 Lime 搜索

#### 项目范围

- **项目设置**：配置项目范围设置
- **数据集管理**：管理项目数据集
- **权限控制**：控制数据集访问

## 使用场景

### 适合使用 Fusion 的场景

#### 1. 数据探索

- 快速探索数据集
- 临时数据分析
- 数据验证

#### 2. 数据录入

- 手动数据录入
- 数据清理
- 数据转换

#### 3. 报表生成

- 创建交互式报表
- 参数化报表
- 分发报表

### 应使用 Actions 的场景

#### 1. Ontology 对象创建

- 创建新对象
- 更新对象属性
- 删除对象

#### 2. 生产数据录入

- 高频数据录入
- 多用户协作
- 需要权限控制

#### 3. 工作流集成

- 集成到工作流
- 触发其他操作
- 复杂业务逻辑

## 工作流程

```
┌─────────────────────────────────────────────────────────────┐
│                  Fusion 工作流程                            │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  1. 数据获取                                                │
│     ├── 索引数据集                                         │
│     ├── 搜索数据                                           │
│     └── 数据查找                                           │
│     ↓                                                        │
│  2. 表格构建                                                │
│     ├── 创建表格区域                                       │
│     ├── 添加公式                                           │
│     ├── 设置下拉菜单                                       │
│     └── 格式化单元格                                       │
│     ↓                                                        │
│  3. 交互设计                                                │
│     ├── 添加下拉菜单                                       │
│     ├── 链接单元格                                         │
│     ├── 添加交互                                           │
│     └── 执行 Actions                                       │
│     ↓                                                        │
│  4. 数据写回                                                │
│     ├── 同步到数据集                                       │
│     ├── 提交结果                                           │
│     └── 供下游使用                                         │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## 公式参考

### 数据查找公式

- `LOOKUP`：查找数据
- `FILTER`：过滤数据
- `JOIN`：连接数据

### 聚合公式

- `SUM`：求和
- `AVERAGE`：平均值
- `COUNT`：计数

### 文本公式

- `CONCATENATE`：连接文本
- `SUBSTRING`：提取子串
- `UPPER/LOWER`：大小写转换

### 日期公式

- `DATEDIFF`：日期差
- `DATEADD`：日期加减
- `NOW`：当前日期时间

## 最佳实践

### 1. 性能优化

- **索引数据集**：确保数据集被索引
- **限制数据范围**：限制查找范围
- **使用表格区域**：使用表格区域提高性能

### 2. 数据质量

- **验证结果**：验证公式结果
- **错误处理**：处理公式错误
- **数据清洗**：清洗数据

### 3. 用户协作

- **锁定单元格**：保护公式
- **添加注释**：添加说明
- **版本控制**：跟踪更改

## 与其他应用集成

### Contour

- **数据导出**：将数据导出到 Contour
- **可视化**：在 Contour 中可视化
- **分析**：在 Contour 中分析

### Quiver

- **时间序列**：可视化时间序列
- **仪表板**：创建仪表板
- **分析**：执行分析

### Workshop

- **嵌入表格**：在 Workshop 中嵌入表格
- **用户输入**：收集用户输入
- **交互**：创建交互界面

## 限制

### 当前限制

- **不是数据库**：Fusion 不是数据库替代品
- **性能限制**：大型数据集可能性能不佳
- **并发限制**：多用户编辑有限制

## 相关文档

- [Sheets](https://palantir.com/docs/foundry/fusion/sheets/) - 工作表详解
- [Formulas](https://palantir.com/docs/foundry/fusion/formulas/) - 公式详解
- [Datasets](https://palantir.com/docs/foundry/fusion/datasets/) - 数据集详解
- [Index datasets](https://palantir.com/docs/foundry/fusion/index-datasets/) - 索引数据集
- [Lookup datasets](https://palantir.com/docs/foundry/fusion/lookup-datasets/) - 查找数据集
- [Project scope](https://palantir.com/docs/foundry/fusion/project-scope/) - 项目范围

---

*本文档基于 Palantir Foundry 官方文档整理*
