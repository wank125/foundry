# Modeling Objectives 概览

> 更新时间：2025-12-28
> 文档来源：https://palantir.com/docs/foundry/model-integration/objectives/

## 概述

**Modeling Objective（建模目标）** 是一个**项目中心**，围绕特定运营问题集中管理上下文、相关数据源、元数据和模型。可以将目标视为建模问题的**定义**（问题的接口），而提交的模型提供**实现**。

## 核心概念

### Modeling Objective

```
┌─────────────────────────────────────────────────────────────┐
│          Modeling Objective 概念结构                        │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  Modeling Objective (问题定义/接口)                         │
│  ├── 上下文 (Context)                                       │
│  ├── 数据源 (Data Sources)                                  │
│  ├── 元数据 (Metadata)                                      │
│  ├── 指标 (Metrics)                                         │
│  └── 模型提交 (Submissions)                                 │
│      ├──                                                     │
│      Submission 1 → Release → Deployment                    │
│      Submission 2 → Release → Deployment                    │
│      Submission 3 → Release → Deployment                    │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## 核心组件

### 1. Objectives（目标）

**作用**：
- 建模生态系统的通信中心
- 评估、审查和运营化连续模型解决方案的系统记录
- 定义建模问题的接口

**关联指标**：
- 目标与**指标**关联
- 指标定义如何评估提交的模型
- 模型之间相互比较

### 2. Submissions（提交）

**概念**：
- 当模型提交到建模目标进行管理和评估时，会创建该模型版本的副本
- 此不可变提交类似于代码 Pull Request
- 提交模型即请求全面审查

**功能**：
- 建模目标是潜在生产就绪模型版本的目录
- 每个提交都是模型版本的快照
- 保留完整的版本历史

### 3. Releases（发布）

**概念**：
- 提交的模型可以被**发布**
- 发布是版本化、打包和生产就绪的资产
- 包含模型提交代码

**组成**：
- **环境标签**：如 "Staging" 或 "Production"
- **用户定义版本号**：语义化版本控制
- **发布说明**：简短描述字段

**作用**：
- 保护生产部署
- 要求通过有意的升级
- 提供可审计的模型版本历史

### 4. Deployments（部署）

**概念**：
- **部署**将选定的和发布的模型交付给消费者
- 包括生产管道、运营应用和 API 订阅者

**类型**：

#### Batch deployments（批处理部署）

- **运行方式**：在管道内通过在指定输入 Foundry 数据集上执行模型来运行
- **输出**：将结果发布到输出数据集
- **计算**：利用分布式计算
- **适用场景**：
  - 生产管道（例如：预测县内所有地址的房价）
  - 大规模非实时处理（如批量计算机视觉或文档分析）
- **管理**：通过构建计划管理
- **权限**：从输入数据集、模型、Objective 和包含项目传播权限

#### Live deployments（实时部署）

- **运行方式**：通过无服务器 REST API 端点提供交互式查询
- **特点**：
  - 可独立授权
  - 配置复制和资源
  - 高可用性
  - 模型可通过 CI/CD 更新而不会导致端点停机
- **集成方式**：
  - 创建交互式 Live 端点
  - 使用 Functions on models
  - 集成到场景分析和模拟

### 5. Metrics（指标）

**概念**：
- 评估数据集上生成和跟踪模型的**指标**
- 以及该数据集内的逻辑子集
- 指标及其关联的输入数据集为建模目标内的评估工作流提供支持

**类型**：
- **临时生成**：开发时生成
- **系统生成**：作为建模目标的自动模型评估的一部分生成

**可见性**：
- 在模型预览中可见
- 在评估仪表板中与其他模型比较

### MetricSet

**概念**：
- `MetricSet` 封装单个模型评估的数值指标、图像和图表
- 包含对相应模型（和版本）的引用
- 包含计算指标的单一数据集和事务（即版本）
- 此数据集引用称为 `MetricSet` 的"输入数据集"

## 工作流程

```
┌─────────────────────────────────────────────────────────────┐
│          Modeling Objectives 工作流程                       │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  1. 定义 Objective                                          │
│     ├── 定义问题接口                                       │
│     ├── 配置指标                                           │
│     ├── 准备数据源                                         │
│     └── 设置元数据                                         │
│     ↓                                                        │
│  2. 提交模型 (Submit)                                       │
│     ├── 开发模型                                           │
│     ├── 生成指标                                           │
│     ├── 提交到 Objective                                   │
│     └── 请求审查                                           │
│     ↓                                                        │
│  3. 审查和评估                                              │
│     ├── 比较指标                                           │
│     ├── 审查代码                                           │
│     ├── 评估性能                                           │
│     └── 选择最佳模型                                       │
│     ↓                                                        │
│  4. 发布模型 (Release)                                      │
│     ├── 创建 Release                                       │
│     ├── 添加版本号                                         │
│     ├── 标记环境 (Staging/Production)                      │
│     └── 添加发布说明                                       │
│     ↓                                                        │
│  5. 部署模型 (Deploy)                                       │
│     ├── 配置 Deployment                                    │
│     ├── Batch: 管道部署                                    │
│     ├── Live: API 端点                                     │
│     └── 监控性能                                           │
│     ↓                                                        │
│  6. 持续改进                                                │
│     ├── 收集反馈                                           │
│     ├── 监控指标                                           │
│     ├── 迭代模型                                           │
│     └── 重新发布                                           │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## 部署架构

```
┌─────────────────────────────────────────────────────────────┐
│              部署架构关系图                                 │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  Modeling Objective                                         │
│      ├── Submission 1 ────┐                                │
│      ├── Submission 2 ────┼──> Release 1.0 (Staging)       │
│      └── Submission 3 ────┘     ↓                          │
│                                │                            │
│                          Deployment                         │
│                          ├── Batch Pipeline                │
│                          └── Live API Endpoint             │
│                                ↓                            │
│                          Consumers                          │
│                          ├── Production Pipelines           │
│                          ├── Operational Apps              │
│                          └── API Subscribers               │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

## 元数据管理

### 自定义元数据

**功能**：
- 目标具有高度可配置的关联**元数据**
- 可用于启用广泛的管理和协作工作流
- 可以在每次模型提交时收集自定义元数据字段

**用途**：
- 帮助将模型相互比较
- 跟踪模型演进
- 记录建模决策
- 支持合规性要求

## CI/CD 集成

### 持续集成

- **自动评估**：自动模型评估
- **指标生成**：系统生成指标
- **提交审查**：审查工作流

### 持续交付

- **自动化部署**：自动部署新模型版本
- **零停机时间**：更新模型而不会停机
- **保留血缘**：保留完整的模型血缘
- **版本控制**：可审计的版本历史

## 最佳实践

### 1. Objective 设计

- **明确定义**：清晰定义问题接口
- **指标选择**：选择合适的评估指标
- **数据准备**：准备高质量数据集

### 2. 模型开发

- **版本控制**：使用版本控制
- **文档记录**：记录模型开发过程
- **测试验证**：充分测试和验证

### 3. 发布管理

- **语义版本**：使用语义化版本号
- **环境标签**：使用清晰的环境标签
- **发布说明**：提供详细的发布说明

### 4. 部署策略

- **渐进部署**：从 Staging 到 Production
- **监控性能**：持续监控部署性能
- **回滚计划**：准备回滚计划

## 与其他功能集成

### Pipeline Builder

- **批处理部署**：通过 Pipeline Builder 配置批处理部署
- **数据输入**：从数据集读取输入
- **数据输出**：将结果写入数据集

### Functions

- **Functions on models**：通过 Functions 调用模型
- **实时推理**：实现实时推理
- **应用集成**：集成到运营应用

### API

- **Live endpoints**：通过 API 公开模型
- **外部集成**：与外部系统集成
- **API 订阅**：支持 API 订阅者

## 使用场景

### 1. 房价预测

- **Objective**：预测房价
- **输入**：房屋属性数据集
- **输出**：预测价格
- **部署**：批处理部署预测所有地址

### 2. 文档分析

- **Objective**：分析文档内容
- **输入**：文档文件
- **输出**：提取的信息
- **部署**：批处理部署批量处理

### 3. 实时推荐

- **Objective**：实时推荐
- **输入**：用户行为
- **输出**：推荐结果
- **部署**：Live 部署提供 API

### 4. 异常检测

- **Objective**：检测异常
- **输入**：时间序列数据
- **输出**：异常标记
- **部署**：批处理或 Live 部署

## 相关文档

- [Overview](https://palantir.com/docs/foundry/model-integration/overview/) - 模型集成概述
- [Deployments](https://palantir.com/docs/foundry/model-integration/deployments/) - 部署详解
- [Metrics](https://palantir.com/docs/foundry/model-integration/metrics/) - 指标详解
- [Releases](https://palantir.com/docs/foundry/model-integration/releases/) - 发布详解

---

*本文档基于 Palantir Foundry 官方文档整理*
